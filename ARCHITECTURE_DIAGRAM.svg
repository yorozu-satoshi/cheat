<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" width="1200" height="900">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0f3460"/>
      <stop offset="100%" style="stop-color:#1a1a2e"/>
    </linearGradient>
    <linearGradient id="processGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e94560"/>
      <stop offset="100%" style="stop-color:#c73659"/>
    </linearGradient>
    <linearGradient id="ragGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00d9ff"/>
      <stop offset="100%" style="stop-color:#0099cc"/>
    </linearGradient>
    <linearGradient id="llmGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#7c3aed"/>
      <stop offset="100%" style="stop-color:#5b21b6"/>
    </linearGradient>
    <linearGradient id="outputGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.3"/>
    </filter>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#0a0a0f"/>

  <!-- Grid pattern -->
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#1a1a2e" stroke-width="0.5"/>
  </pattern>
  <rect width="1200" height="900" fill="url(#grid)" opacity="0.5"/>

  <!-- Title -->
  <text x="600" y="50" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#ffffff" text-anchor="middle">CheatPaper 次世代アーキテクチャ</text>
  <text x="600" y="80" font-family="Arial, sans-serif" font-size="16" fill="#888888" text-anchor="middle">GraphRAG + 設計条件インデックス + ローカルLLM</text>

  <!-- Input Layer -->
  <g transform="translate(50, 120)">
    <rect x="0" y="0" width="300" height="140" rx="10" fill="url(#inputGrad)" filter="url(#shadow)"/>
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">音声入力レイヤー</text>

    <!-- Microphone -->
    <rect x="20" y="50" width="80" height="70" rx="8" fill="#1e3a5f" stroke="#00d9ff" stroke-width="2"/>
    <text x="60" y="85" font-family="Arial, sans-serif" font-size="24" fill="#00d9ff" text-anchor="middle">🎤</text>
    <text x="60" y="105" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">マイク</text>

    <!-- System Audio -->
    <rect x="110" y="50" width="80" height="70" rx="8" fill="#1e3a5f" stroke="#00d9ff" stroke-width="2"/>
    <text x="150" y="85" font-family="Arial, sans-serif" font-size="24" fill="#00d9ff" text-anchor="middle">🔊</text>
    <text x="150" y="105" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">システム音声</text>

    <!-- Documents -->
    <rect x="200" y="50" width="80" height="70" rx="8" fill="#1e3a5f" stroke="#00d9ff" stroke-width="2"/>
    <text x="240" y="85" font-family="Arial, sans-serif" font-size="24" fill="#00d9ff" text-anchor="middle">📄</text>
    <text x="240" y="105" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">参照資料</text>
  </g>

  <!-- Arrow 1 -->
  <path d="M 200 270 L 200 300" stroke="#e94560" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e94560"/>
    </marker>
  </defs>

  <!-- Processing Layer -->
  <g transform="translate(50, 310)">
    <rect x="0" y="0" width="300" height="120" rx="10" fill="url(#processGrad)" filter="url(#shadow)"/>
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">音声処理レイヤー</text>

    <rect x="15" y="45" width="130" height="60" rx="6" fill="rgba(255,255,255,0.1)" stroke="#ffffff" stroke-width="1"/>
    <text x="80" y="70" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">Whisper.cpp</text>
    <text x="80" y="90" font-family="Arial, sans-serif" font-size="10" fill="#ffcccc" text-anchor="middle">音声認識 (500MB)</text>

    <rect x="155" y="45" width="130" height="60" rx="6" fill="rgba(255,255,255,0.1)" stroke="#ffffff" stroke-width="1"/>
    <text x="220" y="70" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">pyannote-rs</text>
    <text x="220" y="90" font-family="Arial, sans-serif" font-size="10" fill="#ffcccc" text-anchor="middle">話者分離</text>
  </g>

  <!-- Arrow 2 -->
  <path d="M 200 440 L 200 470" stroke="#00d9ff" stroke-width="3" fill="none" marker-end="url(#arrowhead2)"/>
  <defs>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00d9ff"/>
    </marker>
  </defs>

  <!-- RAG Layer - Main Box -->
  <g transform="translate(50, 480)">
    <rect x="0" y="0" width="700" height="200" rx="10" fill="url(#ragGrad)" filter="url(#shadow)"/>
    <text x="350" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">インテリジェントRAGレイヤー</text>

    <!-- GraphRAG -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="200" height="130" rx="8" fill="rgba(0,0,0,0.3)" stroke="#ffffff" stroke-width="2"/>
      <text x="100" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">GraphRAG</text>
      <text x="100" y="50" font-family="Arial, sans-serif" font-size="28" fill="#ffffff" text-anchor="middle">🕸️</text>
      <text x="100" y="75" font-family="Arial, sans-serif" font-size="12" fill="#ffffff" text-anchor="middle">LightRAG + SurrealDB</text>
      <rect x="10" y="85" width="180" height="35" rx="4" fill="#10b981"/>
      <text x="100" y="108" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">6000x トークン効率</text>
    </g>

    <!-- Design Conditions -->
    <g transform="translate(240, 50)">
      <rect x="0" y="0" width="200" height="130" rx="8" fill="rgba(0,0,0,0.3)" stroke="#ffffff" stroke-width="2"/>
      <text x="100" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">設計条件インデックス</text>
      <text x="100" y="50" font-family="Arial, sans-serif" font-size="28" fill="#ffffff" text-anchor="middle">📋</text>
      <text x="100" y="75" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">会話タイプ別最適化</text>
      <text x="30" y="100" font-family="Arial, sans-serif" font-size="10" fill="#ccffff" text-anchor="start">• 交渉 • インタビュー</text>
      <text x="30" y="115" font-family="Arial, sans-serif" font-size="10" fill="#ccffff" text-anchor="start">• ブレスト • レビュー</text>
    </g>

    <!-- SQLite + Vector -->
    <g transform="translate(460, 50)">
      <rect x="0" y="0" width="220" height="130" rx="8" fill="rgba(0,0,0,0.3)" stroke="#ffffff" stroke-width="2"/>
      <text x="110" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">ハイブリッド検索</text>

      <rect x="10" y="40" width="95" height="40" rx="4" fill="#1e3a5f"/>
      <text x="57" y="55" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">SQLite</text>
      <text x="57" y="70" font-family="Arial, sans-serif" font-size="9" fill="#00d9ff" text-anchor="middle">FTS5 + BM25</text>

      <rect x="115" y="40" width="95" height="40" rx="4" fill="#1e3a5f"/>
      <text x="162" y="55" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">HNSW</text>
      <text x="162" y="70" font-family="Arial, sans-serif" font-size="9" fill="#00d9ff" text-anchor="middle">ベクトル検索</text>

      <text x="110" y="105" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">768次元埋め込み</text>
      <text x="110" y="120" font-family="Arial, sans-serif" font-size="10" fill="#ccffff" text-anchor="middle">(multilingual-e5-base)</text>
    </g>
  </g>

  <!-- Arrow 3 -->
  <path d="M 400 690 L 400 720" stroke="#7c3aed" stroke-width="3" fill="none" marker-end="url(#arrowhead3)"/>
  <defs>
    <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7c3aed"/>
    </marker>
  </defs>

  <!-- LLM Layer -->
  <g transform="translate(150, 730)">
    <rect x="0" y="0" width="500" height="80" rx="10" fill="url(#llmGrad)" filter="url(#shadow)"/>
    <text x="250" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">ローカルLLM (Qwen 2.5 7B)</text>
    <text x="250" y="60" font-family="Arial, sans-serif" font-size="14" fill="#e0e0ff" text-anchor="middle">llama.cpp | 8192 tokens | 完全オフライン</text>
  </g>

  <!-- Arrow 4 -->
  <path d="M 400 820 L 400 840" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrowhead4)"/>
  <defs>
    <marker id="arrowhead4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
  </defs>

  <!-- Output -->
  <g transform="translate(250, 845)">
    <rect x="0" y="0" width="300" height="45" rx="8" fill="url(#outputGrad)" filter="url(#shadow)"/>
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">💡 リアルタイムAI提案</text>
  </g>

  <!-- Right Side - Key Metrics -->
  <g transform="translate(800, 120)">
    <rect x="0" y="0" width="350" height="560" rx="10" fill="rgba(26, 26, 46, 0.9)" stroke="#333355" stroke-width="2"/>
    <text x="175" y="35" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">主要メトリクス</text>

    <!-- Metric 1 -->
    <rect x="20" y="55" width="310" height="80" rx="8" fill="rgba(0, 217, 255, 0.1)" stroke="#00d9ff" stroke-width="1"/>
    <text x="35" y="80" font-family="Arial, sans-serif" font-size="14" fill="#00d9ff">トークン効率</text>
    <text x="35" y="110" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff">6,000x</text>
    <text x="150" y="110" font-family="Arial, sans-serif" font-size="12" fill="#888888">従来RAG比</text>

    <!-- Metric 2 -->
    <rect x="20" y="145" width="310" height="80" rx="8" fill="rgba(233, 69, 96, 0.1)" stroke="#e94560" stroke-width="1"/>
    <text x="35" y="170" font-family="Arial, sans-serif" font-size="14" fill="#e94560">クエリ精度</text>
    <text x="35" y="200" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff">87%</text>
    <text x="100" y="200" font-family="Arial, sans-serif" font-size="12" fill="#888888">vs 23% (従来)</text>

    <!-- Metric 3 -->
    <rect x="20" y="235" width="310" height="80" rx="8" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="1"/>
    <text x="35" y="260" font-family="Arial, sans-serif" font-size="14" fill="#10b981">検索時間削減</text>
    <text x="35" y="290" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff">-85%</text>
    <text x="110" y="290" font-family="Arial, sans-serif" font-size="12" fill="#888888">102分→15分</text>

    <!-- Metric 4 -->
    <rect x="20" y="325" width="310" height="80" rx="8" fill="rgba(124, 58, 237, 0.1)" stroke="#7c3aed" stroke-width="1"/>
    <text x="35" y="350" font-family="Arial, sans-serif" font-size="14" fill="#7c3aed">クラウドコスト</text>
    <text x="35" y="380" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff">¥0</text>
    <text x="80" y="380" font-family="Arial, sans-serif" font-size="12" fill="#888888">完全ローカル処理</text>

    <!-- Metric 5 -->
    <rect x="20" y="415" width="310" height="80" rx="8" fill="rgba(255, 193, 7, 0.1)" stroke="#ffc107" stroke-width="1"/>
    <text x="35" y="440" font-family="Arial, sans-serif" font-size="14" fill="#ffc107">年間ROI</text>
    <text x="35" y="470" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff">36,150%</text>
    <text x="170" y="470" font-family="Arial, sans-serif" font-size="12" fill="#888888">(10人チーム)</text>

    <!-- Privacy Badge -->
    <rect x="20" y="505" width="310" height="45" rx="8" fill="#10b981"/>
    <text x="175" y="535" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">🔒 完全プライバシー保護</text>
  </g>

  <!-- Data Flow Labels -->
  <text x="370" y="290" font-family="Arial, sans-serif" font-size="11" fill="#888888">テキスト変換</text>
  <text x="370" y="460" font-family="Arial, sans-serif" font-size="11" fill="#888888">文脈抽出</text>
  <text x="570" y="710" font-family="Arial, sans-serif" font-size="11" fill="#888888">最適化プロンプト</text>

  <!-- Legend -->
  <g transform="translate(800, 700)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">凡例</text>
    <rect x="0" y="15" width="20" height="12" fill="#0f3460"/>
    <text x="30" y="25" font-family="Arial, sans-serif" font-size="11" fill="#888888">入力処理</text>
    <rect x="0" y="35" width="20" height="12" fill="#e94560"/>
    <text x="30" y="45" font-family="Arial, sans-serif" font-size="11" fill="#888888">音声処理</text>
    <rect x="0" y="55" width="20" height="12" fill="#00d9ff"/>
    <text x="30" y="65" font-family="Arial, sans-serif" font-size="11" fill="#888888">RAG検索</text>
    <rect x="0" y="75" width="20" height="12" fill="#7c3aed"/>
    <text x="30" y="85" font-family="Arial, sans-serif" font-size="11" fill="#888888">LLM推論</text>
    <rect x="120" y="15" width="20" height="12" fill="#10b981"/>
    <text x="150" y="25" font-family="Arial, sans-serif" font-size="11" fill="#888888">出力</text>
  </g>

  <!-- Footer -->
  <text x="600" y="880" font-family="Arial, sans-serif" font-size="12" fill="#555555" text-anchor="middle">CheatPaper Architecture v2.0 | 2025-01-11 | All Rights Reserved</text>
</svg>
